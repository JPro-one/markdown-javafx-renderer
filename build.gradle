
buildscript {
  repositories {
    jcenter()

    maven {
      url "http://sandec.bintray.com/repo"
    }
  }

  dependencies {
    classpath 'com.sandec.jpro:jpro-plugin-gradle:2018.1.5'
    classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.8.4'
  }
}

repositories {
  jcenter()
}


apply plugin: 'java'

group = 'com.sandec'
version = "$MDFX_VERSION"

compileJava {
  sourceCompatibility = 1.8
  targetCompatibility = 1.8
}

apply plugin: 'maven-publish'
apply plugin: 'com.jfrog.bintray'


dependencies {
  compile 'com.vladsch.flexmark:flexmark-ext-tables:0.34.10'
  compile 'com.vladsch.flexmark:flexmark-ext-attributes:0.34.10'
}

task sourcesJar(type: Jar, dependsOn: classes) {
  classifier = 'sources'
  from sourceSets.main.allSource
}

publishing {
  publications {
    mavenJava(MavenPublication) {
      from components.java
      artifact sourcesJar
      groupId project.group
      artifactId "mdfx"
      version project.version
    }
  }
}

bintray {
  if(project.hasProperty("BINTRAY_USER")) {
    user = BINTRAY_USER
    key  = BINTRAY_KEY
  }
  publications = ['mavenJava']
  publish = true
  override = true
  pkg {
    repo = 'repo'
    name = project.name
    userOrg = 'sandec'
  }
}


configure([project(':example')]) {
  apply plugin: 'java'
  apply plugin: 'application'
  apply plugin: 'com.sandec.jpro'

  repositories {
    jcenter()
  }

  dependencies {
    compile rootProject

    compile group: 'commons-io', name: 'commons-io', version: '2.5'
  }

  mainClassName = 'com.sandec.mdfx.ExampleMDFX'

  jpro.visible = true
}

